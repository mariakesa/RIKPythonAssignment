{% extends "base.html" %}

{% block main %}
<div class="container">
    <h2>Osaühingu asutamine</h2>
    <form action="/osauhingu_asutamine/entry" method="POST" id="form">
        {{osauhingu_asutamise_vorm.csrf_token}}
        <div class="container">
            <div class="form-group">
                {{osauhingu_asutamise_vorm.osauhingu_nimi.label}}
                {{osauhingu_asutamise_vorm.osauhingu_nimi}}
            </div>
            <div class="form-group">
                {{osauhingu_asutamise_vorm.registrikood.label}}
                {{osauhingu_asutamise_vorm.registrikood}}
            </div>
            <div class="form-group">
                {{osauhingu_asutamise_vorm.asutamise_kuupaev.label}}
                {{osauhingu_asutamise_vorm.asutamise_kuupaev}}
            </div>
        </div>
        <div id="fuus-asutajad">
            <h5>Füüsilisest isikust asutajad</h5>
        </div>
        <div id="juur-asutajad">
            <h5>Juriidilisest isikust asutajad</h5>
        </div>
        <div class="form-group">
            {{osauhingu_asutamise_vorm.asuta}}
        </div>
    </form>
    <div> Lisa osanikud </div>
    <form action="/osauhingu_asutamine" method="post">
        {{otsing_dct['fuus_isikud_nimeline_otsing'].csrf_token}}
        {{otsing_dct['fuus_isikud_nimeline_otsing'].fuus_is_marksona.label}}
        {{otsing_dct['fuus_isikud_nimeline_otsing'].fuus_is_marksona}}
        {{otsing_dct['fuus_isikud_nimeline_otsing'].otsi}}
    </form>
    <form action="/osauhingu_asutamine" method="post">
        {{otsing_dct['fuus_isikud_ik_otsing'].csrf_token}}
        {{otsing_dct['fuus_isikud_ik_otsing'].isikukood.label}}
        {{otsing_dct['fuus_isikud_ik_otsing'].isikukood}}
        {{otsing_dct['fuus_isikud_ik_otsing'].otsi}}
    </form>
    <!--
    <form action="/" method="post">
        {{otsing_dct['juur_isikud_nimeline_otsing'].csrf_token}}
        {{otsing_dct['juur_isikud_nimeline_otsing'].juur_is_marksona.label}}
        {{otsing_dct['juur_isikud_nimeline_otsing'].juur_is_marksona}}
        {{otsing_dct['juur_isikud_nimeline_otsing'].otsi}}
    </form>
    <form action="/" method="post">
        {{otsing_dct['juur_isikud_rk_otsing'].csrf_token}}
        {{otsing_dct['juur_isikud_rk_otsing'].juur_is_registrikood.label}}
        {{otsing_dct['juur_isikud_rk_otsing'].juur_is_registrikood}}
        {{otsing_dct['juur_isikud_rk_otsing'].otsi}}
    </form>
-->
    <div id="lisatud-fuus-osanikud"></div>
    <div id="fuus-otsingu-tulemused">
        <table class="table">
            <thead>
                <tr>
                    {% for column in fuus_paringu_tagastus.keys() %}
                    <th>{{ column}}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for i in range(fuus_paringu_tagastus['id']|length) %}
                <tr>
                    <td>{{ fuus_paringu_tagastus['id'][i] }}</td>
                    <td>{{ fuus_paringu_tagastus['Füüsilisest isikust osaniku nimi'][i] }}</td>
                    <td>{{ fuus_paringu_tagastus['Isikukood'][i] }}</td>
                   <td><button onclick="addOsanikToForm({{ fuus_paringu_tagastus['id'][i] }}, '{{ fuus_paringu_tagastus['Füüsilisest isikust osaniku nimi'][i] }}')">Click me</button></td> 
                </tr>
                {% endfor %}
            </tbody>
    </div>
    <div id="lisatud-juur-osanikud"></div>
    <div id="juur-otsingu-tulemused">
        <table class="table">
            <thead>
                <tr>
                    {% for column in juur_paringu_tagastus.columns %}
                    <th>{{ column }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for row in juur_paringu_tagastus.values %}
                <tr>
                    {% for value in row %}
                    <td>{{ value }}</td>
                    {% endfor %}
                    <td><button>Click me</button></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <!--
    <button type="button" id="lisa-fuus-button" onclick="addFuusAsutajaBox()">+</button>
    <button id="eemalda-fuus-button">-</button>
    <div id="fuus-asutajad">  
    </div>
    <div class="form-group">
        {{osauhingu_asutamise_vorm.asuta}}
    </div>-->
</div>
</div>
<div class="container" id="edu_sonum">
    {% if edu_sonum != None%}
        {{edu_sonum}}
    {% endif %}
</div>

<script>
    function wrapFormGroup(elem) {
        var formGroup = document.createElement("div");
        formGroup.className = "form-group";
        formGroup.appendChild(elem);
        return formGroup;
    }

    function addOsanikToForm(a,b) {
        console.log(a,b)

        //var osanik = JSON.parse(jsonStr);

        var numFuusAsutaja = document.querySelectorAll(".fuus-asutaja").length;

        //create a new box
        var box = document.createElement("div");
        box.className = "fuus-asutaja";

        var nimi = document.createElement("div");
        nimi.innerText=b
        box.appendChild(nimi);

        var container = document.querySelector("#lisatud-fuus-osanikud");

        container.appendChild(box);

        console.log(nimi.innerText)

    }
</script>
<!--
<script>

function wrapFormGroup(elem) {
  var formGroup = document.createElement("div");
  formGroup.className = "form-group";
  formGroup.appendChild(elem);
  return formGroup;
}
    function addFuusAsutajaBox() {
    // get the number of existing boxes
    var numBoxes = document.querySelectorAll(".fuus-asutaja-box").length;

    // create a new box
    var box = document.createElement("div");
    box.className = "fuus-asutaja-box";

    var label = document.createElement("label");
    label.innerHTML = "Asutaja";
    box.appendChild(wrapFormGroup(label));

    var input = document.createElement("input");
    input.type = "text";
    input.name = "fuus_is_asutajad-" + numBoxes+'-fuus_is_asutaja';
    box.appendChild(wrapFormGroup(input));

    var label2 = document.createElement("label");
    label2.innerHTML = "Asutaja isikukood";
    box.appendChild(warpFormGroup(label2));

    var input2 = document.createElement("input");
    input2.type = "text";
    input2.name = "fuus_is_asutajad-" + numBoxes+'-fuus_is_asutaja_ik';
    box.appendChild(wrapFormGroup(input2));

    // add the new box to the page
    var parent = document.getElementById("fuus-asutajad");
    parent.appendChild(box);
    }


    addFuusAsutajaBox();
</script>
-->
{%endblock%}